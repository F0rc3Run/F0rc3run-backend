name: TEST - Scanner Flags

on:
  workflow_dispatch:

jobs:
  test-scanner:
    runs-on: ubuntu-latest
    steps:
      - name: Install Scanner
        run: |
          echo "Installing BPB-Warp-Scanner using the official installer..."
          bash <(curl -fsSL https://raw.githubusercontent.com/bia-pain-bache/BPB-Warp-Scanner/main/install.sh)

      - name: Test 1 - Show Help Menu
        run: |
          echo "--- Running with -h flag to see available commands ---"
          # با این دستور منوی راهنمای اسکنر را درخواست می‌کنیم تا ببینیم از چه فلگ‌هایی پشتیبانی می‌کند
          BPB-Warp-Scanner-linux-amd64 -h || true

      - name: Test 2 - Run with Specific Flags
        run: |
          echo "--- Running with specific flags (-o test.csv -limit 5) ---"
          # ما اسکنر را بدون پراکسی اجرا می‌کنیم تا فقط ببینیم آیا فلگ‌ها را قبول می‌کند یا نه
          BPB-Warp-Scanner-linux-amd64 -o test.csv -limit 5

      - name: Show Results of Test 2
        if: always() # این مرحله همیشه اجرا می‌شود، حتی اگر مرحله قبل خطا دهد
        run: |
          echo "--- Listing files in directory ---"
          ls -l
          
          echo "--- Content of test.csv (if created) ---"
          cat test.csv || echo "test.csv was not created."
